<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROMISES</title>
</head>
<body>
    <h1> As we know that callback functions were initially used to handle asynchronous operations. However, callbacks functions were limited in terms of functionality and often led to confusing code, so, promises were introduced to deal with these problems. </h1>
    <h1>"I Promise a Result!" <br>

        "Producing code" is code that can take some time. <br>
        "Consuming code" is code that must wait for the result. <br>       
        A Promise is a JavaScript object that links producing code and consuming code.</h1>
        <h2>A promise in JavaScript is similar to a promises we do in real life. When we make a promise, it is a guarantee that in future, we are going to do something. A promise has two possible outcomes: it will be kept when the time comes, or it will not. Similarly, in JavaScript, when we define a promise, either it will be resolved when the time comes, or it will get rejected. </h2>
    <h2>The Promise object represents the eventual completion (or failure) of an asynchronous operation and its resulting value.</h2>
    <h3>Promises are the ideal choice for asynchronous programming. Promises can handle multiple asynchronous operations easily and are better at error handling as compared to callbacks and events.</h3>
    <img src="promise.png" alt="Promise">
    <h3>Promise Syntax: <br>
        let myPromise = new Promise(function(myResolve, myReject) { <br>
        // "Producing Code" (May take some time) <br>
        
          myResolve(); // when successful  <br>
          myReject();  // when error       <br>
        });   <br>
        
        // "Consuming Code" (Must wait for a fulfilled Promise) <br>
        myPromise.then(       <br>
          function(value) { /* code if successful */ }, <br>
          function(error) { /* code if some error */ }  <br>
        );
    </h3>
    <p>When new Promise is created, the function passed into it runs automatically. It contains the producing code which produces the result. Its arguments resolve and reject.</p>
    <h3> Promise Object Properties:  <br> 
         A JavaScript Promise object can be: <br>
        
        Pending  <br>
        Fulfilled <br>
        Rejected  <br>

        The Promise object supports two properties: state and result. <br>
        
        While a Promise object is "pending" (working), the result is undefined. <br>
        
        When a Promise object is "fulfilled", the result is a value. <br>
        
        When a Promise object is "rejected", the result is an error object. <br> <br>
    
myPromise.state	  &emsp;              myPromise.result<br>
"pending"	   &emsp;&emsp;&emsp;      undefined   <br>
"fulfilled"	   &emsp;&emsp;&emsp;      a result val<br>
"rejected"	   &emsp;&emsp;&emsp;      an error object
</h3>

<!-- Program -->
<p id="demo"></p>

<script>
function myDisplayer(some) {
  document.getElementById("demo").innerHTML = some;
}

let myPromise = new Promise(function(myResolve, myReject) {
  let x = 0;

// some code (try to change x to 5)

  if (x == 0) {
    myResolve("OK");
  } else {
    myReject("Error");
  }
});

// Both is correct catch and then function

/* myPromise.then(
  function(value) {myDisplayer(value);},
  function(error) {myDisplayer(error);}
); */

myPromise.then(
  function(value) {myDisplayer(value);},
).catch(
    function(error) {myDisplayer(error);}
);
</script>

</body>
</html>